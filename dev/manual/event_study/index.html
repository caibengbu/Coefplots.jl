<!DOCTYPE html>
<html lang="en"><head><meta charset="UTF-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><title>Special Usage: Event Study · Coefplots.jl</title><meta name="title" content="Special Usage: Event Study · Coefplots.jl"/><meta property="og:title" content="Special Usage: Event Study · Coefplots.jl"/><meta property="twitter:title" content="Special Usage: Event Study · Coefplots.jl"/><meta name="description" content="Documentation for Coefplots.jl."/><meta property="og:description" content="Documentation for Coefplots.jl."/><meta property="twitter:description" content="Documentation for Coefplots.jl."/><script data-outdated-warner src="../../assets/warner.js"></script><link href="https://cdnjs.cloudflare.com/ajax/libs/lato-font/3.0.0/css/lato-font.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/juliamono/0.050/juliamono.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/fontawesome.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/solid.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/brands.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.16.8/katex.min.css" rel="stylesheet" type="text/css"/><script>documenterBaseURL="../.."</script><script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.6/require.min.js" data-main="../../assets/documenter.js"></script><script src="../../search_index.js"></script><script src="../../siteinfo.js"></script><script src="../../../versions.js"></script><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../assets/themes/catppuccin-mocha.css" data-theme-name="catppuccin-mocha"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../assets/themes/catppuccin-macchiato.css" data-theme-name="catppuccin-macchiato"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../assets/themes/catppuccin-frappe.css" data-theme-name="catppuccin-frappe"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../assets/themes/catppuccin-latte.css" data-theme-name="catppuccin-latte"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../assets/themes/documenter-dark.css" data-theme-name="documenter-dark" data-theme-primary-dark/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../assets/themes/documenter-light.css" data-theme-name="documenter-light" data-theme-primary/><script src="../../assets/themeswap.js"></script></head><body><div id="documenter"><nav class="docs-sidebar"><div class="docs-package-name"><span class="docs-autofit"><a href="../../">Coefplots.jl</a></span></div><button class="docs-search-query input is-rounded is-small is-clickable my-2 mx-auto py-1 px-2" id="documenter-search-query">Search docs (Ctrl + /)</button><ul class="docs-menu"><li><a class="tocitem" href="../../">Home</a></li><li><span class="tocitem">Manual</span><ul><li><a class="tocitem" href="../quick_start/">Quick Start</a></li><li><a class="tocitem" href="../multi_dimension/">Plot Combination</a></li><li><a class="tocitem" href="../appearence/">Appearence</a></li><li><a class="tocitem" href="../utilities/">Utilities</a></li><li class="is-active"><a class="tocitem" href>Special Usage: Event Study</a></li></ul></li><li><span class="tocitem">API</span><ul><li><a class="tocitem" href="../../api/types/">Types</a></li><li><a class="tocitem" href="../../api/functions/">Functions</a></li></ul></li></ul><div class="docs-version-selector field has-addons"><div class="control"><span class="docs-label button is-static is-size-7">Version</span></div><div class="docs-selector control is-expanded"><div class="select is-fullwidth is-size-7"><select id="documenter-version-selector"></select></div></div></div></nav><div class="docs-main"><header class="docs-navbar"><a class="docs-sidebar-button docs-navbar-link fa-solid fa-bars is-hidden-desktop" id="documenter-sidebar-button" href="#"></a><nav class="breadcrumb"><ul class="is-hidden-mobile"><li><a class="is-disabled">Manual</a></li><li class="is-active"><a href>Special Usage: Event Study</a></li></ul><ul class="is-hidden-tablet"><li class="is-active"><a href>Special Usage: Event Study</a></li></ul></nav><div class="docs-right"><a class="docs-navbar-link" href="https://github.com/caibengbu/Coefplots.jl" title="View the repository on GitHub"><span class="docs-icon fa-brands"></span><span class="docs-label is-hidden-touch">GitHub</span></a><a class="docs-navbar-link" href="https://github.com/caibengbu/Coefplots.jl/blob/main/docs/src/manual/event_study.md" title="Edit source on GitHub"><span class="docs-icon fa-solid"></span></a><a class="docs-settings-button docs-navbar-link fa-solid fa-gear" id="documenter-settings-button" href="#" title="Settings"></a><a class="docs-article-toggle-button fa-solid fa-chevron-up" id="documenter-article-toggle-button" href="javascript:;" title="Collapse all docstrings"></a></div></header><article class="content" id="documenter-page"><h1 id="Special-Usage:-Event-Study"><a class="docs-heading-anchor" href="#Special-Usage:-Event-Study">Special Usage: Event Study</a><a id="Special-Usage:-Event-Study-1"></a><a class="docs-heading-anchor-permalink" href="#Special-Usage:-Event-Study" title="Permalink"></a></h1><p>In this section, I will demonstrate how to use our pakcage to produce an event study plot. We first create a panel data consisting of 100 individuals and 20 periods.</p><pre><code class="language-julia hljs">using Coefplots
using FixedEffectModels
using DataFrames
using Random
Random.seed!(1234)

N = 100 # 100 individuals
T = 20 # 20 periods
idfe = rand(N)
timefe = rand(T)
event_time = 8 # make the eighth period be the event time
id = repeat(1:N, inner=T) # generate id
is_treated = id .&lt; N/2 # make first half of individuals are treated, last half of indivuduals are controls
time = Float64.(repeat(1:T, outer=N) .- event_time) # generate time
treatment = repeat(rand(N), inner=T) .* is_treated # generate treatment, 0 if obs are controls
idfe = rand(N)
timefe = rand(T)
outcome = treatment .* (time .&gt; 0) + idfe[id] + timefe[Int.(time .+ event_time)] .+ rand(N*T) # generate outcome, treatment only have an effect after event time
#add id FE and time FE, also add a noise.

df = DataFrame(id = id, time = time, outcome = outcome, treatment = treatment)
@view df[1:10, :]</code></pre><div><div style = "float: left;"><span>10×4 SubDataFrame</span></div><div style = "clear: both;"></div></div><div class = "data-frame" style = "overflow-x: scroll;"><table class = "data-frame" style = "margin-bottom: 6px;"><thead><tr class = "header"><th class = "rowNumber" style = "font-weight: bold; text-align: right;">Row</th><th style = "text-align: left;">id</th><th style = "text-align: left;">time</th><th style = "text-align: left;">outcome</th><th style = "text-align: left;">treatment</th></tr><tr class = "subheader headerLastRow"><th class = "rowNumber" style = "font-weight: bold; text-align: right;"></th><th title = "Int64" style = "text-align: left;">Int64</th><th title = "Float64" style = "text-align: left;">Float64</th><th title = "Float64" style = "text-align: left;">Float64</th><th title = "Float64" style = "text-align: left;">Float64</th></tr></thead><tbody><tr><td class = "rowNumber" style = "font-weight: bold; text-align: right;">1</td><td style = "text-align: right;">1</td><td style = "text-align: right;">-7.0</td><td style = "text-align: right;">1.45475</td><td style = "text-align: right;">0.791624</td></tr><tr><td class = "rowNumber" style = "font-weight: bold; text-align: right;">2</td><td style = "text-align: right;">1</td><td style = "text-align: right;">-6.0</td><td style = "text-align: right;">2.08694</td><td style = "text-align: right;">0.791624</td></tr><tr><td class = "rowNumber" style = "font-weight: bold; text-align: right;">3</td><td style = "text-align: right;">1</td><td style = "text-align: right;">-5.0</td><td style = "text-align: right;">1.95472</td><td style = "text-align: right;">0.791624</td></tr><tr><td class = "rowNumber" style = "font-weight: bold; text-align: right;">4</td><td style = "text-align: right;">1</td><td style = "text-align: right;">-4.0</td><td style = "text-align: right;">1.89466</td><td style = "text-align: right;">0.791624</td></tr><tr><td class = "rowNumber" style = "font-weight: bold; text-align: right;">5</td><td style = "text-align: right;">1</td><td style = "text-align: right;">-3.0</td><td style = "text-align: right;">1.74856</td><td style = "text-align: right;">0.791624</td></tr><tr><td class = "rowNumber" style = "font-weight: bold; text-align: right;">6</td><td style = "text-align: right;">1</td><td style = "text-align: right;">-2.0</td><td style = "text-align: right;">1.43717</td><td style = "text-align: right;">0.791624</td></tr><tr><td class = "rowNumber" style = "font-weight: bold; text-align: right;">7</td><td style = "text-align: right;">1</td><td style = "text-align: right;">-1.0</td><td style = "text-align: right;">1.22961</td><td style = "text-align: right;">0.791624</td></tr><tr><td class = "rowNumber" style = "font-weight: bold; text-align: right;">8</td><td style = "text-align: right;">1</td><td style = "text-align: right;">0.0</td><td style = "text-align: right;">0.908697</td><td style = "text-align: right;">0.791624</td></tr><tr><td class = "rowNumber" style = "font-weight: bold; text-align: right;">9</td><td style = "text-align: right;">1</td><td style = "text-align: right;">1.0</td><td style = "text-align: right;">2.51456</td><td style = "text-align: right;">0.791624</td></tr><tr><td class = "rowNumber" style = "font-weight: bold; text-align: right;">10</td><td style = "text-align: right;">1</td><td style = "text-align: right;">2.0</td><td style = "text-align: right;">2.5522</td><td style = "text-align: right;">0.791624</td></tr></tbody></table></div><p>We run our four specifications where we (i) do not have any fixed effects, (ii) include individual fixed effect, (iii) include time fixed effects, and (iv) include both individual and time fixed effect, with the help of FixedEffectModels.jl</p><pre><code class="language-julia hljs">res_pool = reg(df, @formula(outcome ~ time&amp;treatment + treatment); contrasts = Dict(:time =&gt; DummyCoding(base=0)), progress_bar = false);

res_idfe = reg(df, @formula(outcome ~ time&amp;treatment + treatment + fe(id)); contrasts = Dict(:time =&gt; DummyCoding(base=0)), progress_bar = false);

res_timefe = reg(df, @formula(outcome ~ time&amp;treatment + treatment + fe(time)); contrasts = Dict(:time =&gt; DummyCoding(base=0)), progress_bar = false);

res_both = reg(df, @formula(outcome ~ time&amp;treatment + treatment + fe(time) + fe(id)); contrasts = Dict(:time =&gt; DummyCoding(base=0)), progress_bar = false);</code></pre><pre class="documenter-example-output"><code class="nohighlight hljs ansi">[ Info: RHS-variable treatment is collinear with the fixed effects.
[ Info: RHS-variable treatment is collinear with the fixed effects.</code></pre><p>The variable names are automatically generated by the regression package of choice. In the case of <code>FixedEffectModels.jl</code>, it looks like something like &quot;time: -7.0 &amp; treatment&quot; meaning the interaction term between the time=7.0 dummy and the treatment variable. For this to be plotted with a readable x tick, we define the following vector <code>rename_rule</code>, populated with the rules by which we want to change the variable name:</p><pre><code class="language-julia hljs">rename_rule = [&quot;time: -7.0 &amp; treatment&quot; =&gt; &quot;\$\\leq\$-7&quot;,
    &quot;time: -6.0 &amp; treatment&quot; =&gt; -6,
    &quot;time: -5.0 &amp; treatment&quot; =&gt; -5,
    &quot;time: -4.0 &amp; treatment&quot; =&gt; -4,
    &quot;time: -3.0 &amp; treatment&quot; =&gt; -3,
    &quot;time: -2.0 &amp; treatment&quot; =&gt; -2,
    &quot;time: -1.0 &amp; treatment&quot; =&gt; -1,
    &quot;treatment&quot; =&gt; 0,
    &quot;time: 1.0 &amp; treatment&quot; =&gt; 1,
    &quot;time: 2.0 &amp; treatment&quot; =&gt; 2,
    &quot;time: 3.0 &amp; treatment&quot; =&gt; 3,
    &quot;time: 4.0 &amp; treatment&quot; =&gt; 4,
    &quot;time: 5.0 &amp; treatment&quot; =&gt; 5,
    &quot;time: 6.0 &amp; treatment&quot; =&gt; 6,
    &quot;time: 7.0 &amp; treatment&quot; =&gt; 7,
    &quot;time: 8.0 &amp; treatment&quot; =&gt; 8,
    &quot;time: 9.0 &amp; treatment&quot; =&gt; 9,
    &quot;time: 10.0 &amp; treatment&quot; =&gt; 10,
    &quot;time: 11.0 &amp; treatment&quot; =&gt; 11,
    &quot;time: 12.0 &amp; treatment&quot; =&gt; &quot;\$\\geq\$12&quot;]</code></pre><p>On a sidenote, the dollarsign is escaped with a backslash. The backslash is also escaped with a backslash. For more information please see <a href="../utilities/#LaTeX-escaping">LaTeX escaping</a>.</p><p>Now, we are ready to call <code>parse()</code> or <code>plot()</code> to get the results from the regression object. </p><pre><code class="language-julia hljs">p = plot(res_pool; rename = rename_rule,
                   keepconnect = true,
                   title = Label(content=&quot;no FE&quot;))</code></pre><p><a href="../esplot1.pdf">[.pdf]</a>, <a href="../esplot1.tex">[generated .tex]</a></p><p><img src="../esplot1.svg" alt/></p><p>We can also combine the plots of the different specifications to one single plot.</p><pre><code class="language-julia hljs">pool = parse(res_pool; rename = rename_rule,
                       keepconnect = true,
                       title = Label(content=&quot;no FE&quot;))

with_idfe = parse(res_idfe; rename = rename_rule,
                            keepconnect = true,
                            title = Label(content=&quot;with id FE&quot;))

with_timefe = parse(res_timefe; rename = rename_rule,
                                keepconnect = true,
                                title = Label(content=&quot;with time FE&quot;))

with_bothfe = parse(res_both; rename = rename_rule,
                              keepconnect = true,
                              title = Label(content=&quot;with id \\&amp; time FE&quot;))

m = Coefplots.MultiCoefplot(pool, with_idfe, with_timefe, with_bothfe;
                            xticklabel = CaptionStyle(rotate=45, size=6),
                            legend     = Coefplots.Legend(at=(0.02,0.98),
                                                          anchor=Symbol(&quot;north west&quot;),
                                                          size=6),
                            note       = Note(content=&quot;This is my note.&quot;,
                                              captionstyle=CaptionStyle(size=6)),
                            xlabel     = Label(content=&quot;time relative to event&quot;),
                            ylabel     = Label(content=&quot;coefficient&quot;),
                            title      = Label(content=&quot;My example event study plot&quot;))

p = plot(m)</code></pre><p><a href="../esplot2.pdf">[.pdf]</a>, <a href="../esplot2.tex">[generated .tex]</a></p><p><img src="../esplot2.svg" alt/></p></article><nav class="docs-footer"><a class="docs-footer-prevpage" href="../utilities/">« Utilities</a><a class="docs-footer-nextpage" href="../../api/types/">Types »</a><div class="flexbox-break"></div><p class="footer-message">Powered by <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> and the <a href="https://julialang.org/">Julia Programming Language</a>.</p></nav></div><div class="modal" id="documenter-settings"><div class="modal-background"></div><div class="modal-card"><header class="modal-card-head"><p class="modal-card-title">Settings</p><button class="delete"></button></header><section class="modal-card-body"><p><label class="label">Theme</label><div class="select"><select id="documenter-themepicker"><option value="auto">Automatic (OS)</option><option value="documenter-light">documenter-light</option><option value="documenter-dark">documenter-dark</option><option value="catppuccin-latte">catppuccin-latte</option><option value="catppuccin-frappe">catppuccin-frappe</option><option value="catppuccin-macchiato">catppuccin-macchiato</option><option value="catppuccin-mocha">catppuccin-mocha</option></select></div></p><hr/><p>This document was generated with <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> version 1.14.1 on <span class="colophon-date" title="Tuesday 2 September 2025 15:34">Tuesday 2 September 2025</span>. Using Julia version 1.11.6.</p></section><footer class="modal-card-foot"></footer></div></div></div></body></html>
